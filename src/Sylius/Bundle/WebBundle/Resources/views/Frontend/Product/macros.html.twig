{% macro price(product, group, taxon) %}
    {% if group.showPrice == 0 %}
        <div class="retail{% if group.showOptPrice != 0 %} one{% endif %}">
            {% if group.showOptPrice == 0 or app.request.host != 'olere-shop.ru' %}Розн. {% endif %}{% if taxon.id is not defined %}{{ render(url('sylius_product_get_price', {'id' : product.id, 'type' : 0, 'taxon' : product.taxons[0].id})) }}{% else %}{{ render(url('sylius_product_get_price', {'id' : product.id, 'type' : 0, 'taxon' : taxon.id})) }}{% endif %}
        </div>
    {% endif %}
    {% if group.showOptPrice == 0 and app.request.host != 'olere-shop.ru' %}
        <div class="opt{% if group.showPrice != 0 %} one{% endif %}">
        Опт. {% if taxon.id is not defined %}{{ render(url('sylius_product_get_price', {'id' : product.id, 'type' : 1, 'taxon' : product.taxons[0].id})) }}{% else %}{{ render(url('sylius_product_get_price', {'id' : product.id, 'type' : 1, 'taxon' : taxon.id})) }}{% endif %}
        </div>
    {% endif %}
{% endmacro %}

{% macro showPrice(product, groups, taxon) %}
    {% from 'SyliusWebBundle:Frontend/Product:macros.html.twig' import price %}
    {% if is_granted('ROLE_USER_OPT') %}
        {{ price(product, groups[0], taxon) }}
    {% elseif is_granted('ROLE_USER', taxon) %}
        {{ price(product, groups[1], taxon) }}
    {% else %}
        {{ price(product, groups[2], taxon) }}
    {% endif %}
{% endmacro %}

{% macro list(products) %}

    {% import 'SyliusWebBundle:Backend/Macros:alerts.html.twig' as alerts %}
    {% if products|length > 0 %}
        <div class="steakyTable">
            <table>
                <tr>
                    <th class="th1">Изображение</th>
                    <th class="th2">{{ sylius_resource_sort('name', 'Название') }}</th>
                    <th class="th3">Артикул</th>
                    <th class="th4">{{ sylius_resource_sort('price', 'Цена') }}</th>
                    <th class="th6">Кол-во</th>
                    <th class="th7">Купить</th>
                </tr>
            </table>
        </div>
        <table class="catalogTable">
        <tr>
            <th class="th1">Изображение</th>
            <th class="th2">{{ sylius_resource_sort('name', 'Название') }}</th>
            <th class="th3">Артикул</th>
            <th class="th4">{{ sylius_resource_sort('price', 'Цена') }}</th>
            <th class="th6">Кол-во</th>
            <th class="th7">Купить</th>
        </tr>
        <tr>
            <td class="border-none" colspan="6"></td>
        </tr>
    {% endif %}
    {% for product in products %}
        {% include 'SyliusWebBundle:Frontend/Product:_single.html.twig' %}
    {% else %}
        {{ alerts.info('sylius.product.no_results'|trans) }}
    {% endfor %}
    {% if products|length > 0 %}
        </table>
    {% endif %}
{% endmacro %}

{% macro grid(productss, groups, taxon) %}{% import 'SyliusWebBundle:Backend/Macros:alerts.html.twig' as alerts %}{% if productss|length > 0 %}<div class="boxes">{% endif %}{% set count = 0 %}{% for p in productss %}{% set count = count + 1 %}{% endfor %}{% for product in productss %}{% include 'SyliusWebBundle:Frontend/Product:_singleBox.html.twig' %}{% else %}<div class="col-md-12">{{ alerts.info('sylius.product.no_results'|trans) }}</div>{% endfor %}{% if productss|length > 0 %}</div>{% endif %}{% endmacro %}
